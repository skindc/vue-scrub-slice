/*!
 * @skindc/vue-scrub-slice v0.0.1-beta.1
 * (c) 2018-present Gary Law <skin@skindc.co.uk>
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function t(t,e){var i=e.sliceMaximum,s=Math.min(i,e.sliceMinimum),a=Math.min(e.totalLength-s,Math.floor(e.totalLength*t/e.sliceSnap)*e.sliceSnap),n=Math.min(i,Math.max(s,e.sliceEndValue-a));return Object.assign({},e,{sliceStartValue:a,sliceEndValue:Math.max(a+e.sliceMinimum,a+n),sliceLength:n,sliceHeadValue:Math.min(n,e.sliceHeadValue)})}function e(t,e){var i=e.sliceMaximum,s=Math.min(i,e.sliceMinimum),a=Math.max(s,Math.floor(e.totalLength*t/e.sliceSnap)*e.sliceSnap),n=Math.min(i,Math.max(s,a-e.sliceStartValue)),l=Math.min(a-s,a-n);return Object.assign({},e,{sliceStartValue:l,sliceEndValue:a,sliceLength:n,sliceHeadValue:Math.min(n,e.sliceHeadValue)})}function i(t,e){var i=Math.floor(e.totalLength*t/e.sliceHeadSnap)*e.sliceHeadSnap,s=Math.max(0,i-e.sliceStartValue);return Object.assign({},e,{sliceHeadValue:Math.min(e.sliceStartValue+s,e.sliceEndValue)-e.sliceStartValue})}function s(t,e,i){var s=e.clientWidth,a=(i.clientX-function(t,e){for(var i=e.offsetLeft,s=e.offsetParent;null!==s;)i+=s.offsetLeft,s=s.offsetParent;return i-(t.body.scrollLeft+t.documentElement.scrollLeft)}(t,e))/s;return a=(a=a>0?a:0)<1?a:1}function a(s,a,n){var l={"vss-slice-start-handle":t,"vss-slice-end-handle":e,"vss-slice-head-handle":i}[s.srcElement.className];return l?l(a,n):n}var n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"controlContainer",staticClass:"vss-scrub",on:{mousedown:t.onThumbMouseDown,touchstart:t.onThumbTouchStart}},[i("div",{class:{"media-slice-bar":!0,dragging:t.dragging}},[i("div",{staticClass:"vss-bar-whole"}),t._v(" "),i("div",{staticClass:"vss-bar-slice",style:{left:t.startPosition,width:t.clipWidth}}),t._v(" "),t.sliced?t._e():i("div",{ref:"sliceStartThumbclass",staticClass:"vss-slice-start-handle",style:{left:t.startPosition}}),t._v(" "),t.sliced?t._e():i("div",{ref:"sliceEndThumbclass",staticClass:"vss-slice-end-handle",style:{left:t.endPosition}}),t._v(" "),i("div",{ref:"sliceHeadPositionThumbclass",staticClass:"vss-slice-head-handle",style:{left:t.sliceHeadPosition}})])])},staticRenderFns:[],props:{totalLength:{type:Number,default:1e3},sliceMaximum:{type:Number,default:500},sliceMinimum:{type:Number,default:100},sliceSnap:{type:Number,default:1},sliceHeadSnap:{type:Number,default:1}},data:function(){return{sliceStartValue:0,sliceStartPercent:0,sliceEndValue:Math.min(this.totalLength,this.sliceMaximum),sliceEndPercent:this.sliceEndValue/this.totalLength,sliceLength:Math.min(this.totalLength,this.sliceMaximum),sliceHeadValue:0,dragging:!1}},computed:{startPosition:function(){return this.sliceStartValue/this.totalLength*100+"%"},endPosition:function(){return this.sliceEndValue/this.totalLength*100+"%"},sliced:function(){return this.actualSliceMinimum>=this.totalLength},clipWidth:function(){return this.actualSliceMinimum>=this.totalLength?"100%":(this.sliceEndValue-this.sliceStartValue)/this.totalLength*100+"%"},sliceHeadPosition:function(){return(this.sliceStartValue+this.sliceHeadValue)/this.totalLength*100+"%"},actualSliceMaximum:function(){return Math.min(this.totalLength,this.sliceMaximum)},actualSliceMinimum:function(){return Math.min(this.totalLength,this.sliceMinimum)},actualSliceSnap:function(){return Math.min(this.totalLength,this.sliceSnap)},actualSliceHeadSnap:function(){return Math.min(this.totalLength,this.sliceHeadSnap)}},methods:{getContext:function(){return{totalLength:this.totalLength,sliceMaximum:this.actualSliceMaximum,sliceMinimum:this.actualSliceMinimum,sliceLength:this.sliceLength,sliceSnap:this.actualSliceSnap,sliceStartValue:this.sliceStartValue,sliceStartPercent:this.sliceStartPercent,sliceEndValue:this.sliceEndValue,sliceEndPercent:this.sliceEndPercent,sliceHeadValue:this.sliceHeadValue,sliceHeadSnap:this.actualSliceHeadSnap}},onThumbMouseDown:function(t){!function(t,e,i,n,l,c){var u=Object.assign({},n),r=function(n){var c=s(t,e,n);u=a(i,c,u),l({state:Object.assign({},u)})};u.dragging=!0,l({state:Object.assign({},u)}),t.addEventListener("mousemove",r),t.addEventListener("mouseup",function n(l){t.removeEventListener("mouseup",n),t.removeEventListener("mousemove",r);var o=s(t,e,l);(u=a(i,o,u)).dragging=!1,c({state:Object.assign({},u)})})}(document,this.$refs.controlContainer,t,this.getContext(),this.onDrag,this.onDragStop),this.$emit("dragbegin")},onThumbTouchStart:function(t){!function(t,e,i,s,a,n){var l=Object.assign({},s);l.dragging=!0,a({state:Object.assign({},l)}),t.addEventListener("touchmove",this.moveHandler),t.addEventListener("touchend",this.stopHandler)}(document,this.$refs.controlContainer,0,this.getContext(),this.onDrag,this.onDragStop),this.$emit("dragbegin")},onDrag:function(t){this.sliceStartValue=t.state.sliceStartValue,this.sliceEndValue=t.state.sliceEndValue,this.sliceLength=t.state.sliceLength,this.dragging=t.state.dragging,this.sliceHeadValue=t.state.sliceHeadValue,this.$emit("drag")},onDragStop:function(t){this.sliceStartValue=t.state.sliceStartValue,this.sliceEndValue=t.state.sliceEndValue,this.sliceLength=t.state.sliceLength,this.dragging=t.state.dragging,this.sliceHeadValue=t.state.sliceHeadValue,this.$emit("dragend"),this.$emit("change",Object.assign({},t.state))}},install:function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).name,i=void 0===e?"scrub-slice":e;t.component(i,this)}};module.exports={install:function(t){t.component("scrub-slice",n)}}});
//# sourceMappingURL=vue-scrub-slice.min.js.map
